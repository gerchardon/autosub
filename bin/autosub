#!/usr/bin/env node
"use strict";

process.bin = process.title = "autosub";

var program = require('commander');
program
    .version('0.0.1')
    .option('-v, --verbose', 'Verbose mode');

program.command('download <file>')
    .action(function(file){
        var winston = require('winston');
        winston.cli();
        if(program.verbose) {
            winston.level = 'debug';
        }
        winston.debug('Find subtitles for : %s', file, {});

        var Autosub = require('../');
        new Autosub()
            .download(file)
            .fail(function(e) {
                winston.error("Error when : ", e.message, {});
            })
            .done();
    });

program.parse(process.argv);
